!function(t,e){var r="click_id",o="__tr_clid",n="tr_utm_camp",a="__tr_utms",i="__tr_utmd",c="__tr_isnu",u="__tr_db",s="__tr_jr",f="3.0",l="session_store",m=function(){"use strict";var t="ABCDEFGHIJKLMNOPQRSTUVWXYZabcdefghijklmnopqrstuvwxyz0123456789+/=";return{encode:function(e){var r,o,n,a,i,c,u,s="",f=0;for(e=function(t){var e,r,o="";for(t=t.replace(/\r\n/g,"\n"),r=0;r<t.length;r++)(e=t.charCodeAt(r))<128?o+=String.fromCharCode(e):e>127&&e<2048?(o+=String.fromCharCode(e>>6|192),o+=String.fromCharCode(63&e|128)):(o+=String.fromCharCode(e>>12|224),o+=String.fromCharCode(e>>6&63|128),o+=String.fromCharCode(63&e|128));return o}(e);f<e.length;)a=(r=e.charCodeAt(f++))>>2,i=(3&r)<<4|(o=e.charCodeAt(f++))>>4,c=(15&o)<<2|(n=e.charCodeAt(f++))>>6,u=63&n,isNaN(o)?c=u=64:isNaN(n)&&(u=64),s+=t.charAt(a),s+=t.charAt(i),s+=t.charAt(c),s+=t.charAt(u);return s},decode:function(e){var r,o,n,a,i,c,u="",s=0;for(e=e.replace(/[^A-Za-z0-9\+\/\=]/g,"");s<e.length;)r=t.indexOf(e.charAt(s++))<<2|(a=t.indexOf(e.charAt(s++)))>>4,o=(15&a)<<4|(i=t.indexOf(e.charAt(s++)))>>2,n=(3&i)<<6|(c=t.indexOf(e.charAt(s++))),u+=String.fromCharCode(r),64!==i&&(u+=String.fromCharCode(o)),64!==c&&(u+=String.fromCharCode(n));return function(t){for(var e="",r=0,o=0,n=0,a=0;r<t.length;)(o=t.charCodeAt(r))<128?(e+=String.fromCharCode(o),r++):o>191&&o<224?(n=t.charCodeAt(r+1),e+=String.fromCharCode((31&o)<<6|63&n),r+=2):(n=t.charCodeAt(r+1),a=t.charCodeAt(r+2),e+=String.fromCharCode((15&o)<<12|(63&n)<<6|63&a),r+=3);return e}(u)}}}();function d(t,e){return"string"!=typeof t&&(t=String(t)),("number"!=typeof e||e<0)&&(e=100),t.length<=e?t:t.slice(0,e)}function p(t){t=t.replace(/[\[]/,"\\[").replace(/[\]]/,"\\]");var e=new RegExp("[\\?&]"+t+"=([^&#]*)").exec(location.search);return null===e?"":decodeURIComponent(e[1].replace(/\+/g," "))}function g(){return t.localStorage?t.localStorage.getItem(u)==l:_(u)==l}function h(e){if(g())return t.sessionStorage?t.sessionStorage.getItem(e):"";var r=_(e);return!r&&t.localStorage&&(r=t.localStorage.getItem(e)),r}function _(t){var r=e.cookie.split("; "),o=null;return r.forEach((function(e){if(0===e.indexOf(t+"="))return o=e.split("=")[1],!1})),o}function S(t){var e=[];["sub1","sub2","sub3","sub4","sub5","sub6","sub7","sub8","sub9","sub10","user_id","txn_id","goal_value","goal_id","status","coupon_code","currency","product_id","product_sku","product_quantity","is_new_user","store_name","season","order_date"].forEach((function(r){var o=t&&t[r]||"";o&&"string"==typeof o&&e.push(r+"="+encodeURIComponent(o))}));var r={};r[a]="utms",r[i]="utmd",r[n]="utmc",r[s]="j",[a,i,n,s].forEach((function(t){var o=h(t);o&&"string"==typeof o&&e.push(r[t]+"="+encodeURIComponent(o))}));var o=t?t.sale_amount:null;if("string"==typeof o){o=o.replace(/,/g,"");var c=Number(o);isNaN(c)||e.push("sale_amount="+c)}else"number"==typeof o&&e.push("sale_amount="+o);return e.push("__v="+f),e.push("s=websdk"),e}function v(t){return t.getFullYear()+"-"+(t.getMonth()+1)+"-"+t.getDate()}function y(e,r,o,n){t.Sentry.captureException(e,(function(e){return e.clear(),r&&e.setExtra("tdomain",r),o&&e.setExtra("token",o),n&&e.setExtra("opts",JSON.stringify(n)),e.setExtra("href",t.location.href),e.setExtra("user_agent",navigator.userAgent),e}))}function b(r,o,n,a){if(t.Sentry)t.Sentry&&"6.19.7"==t.Sentry.SDK_VERSION&&y(r,o,n,a);else{var i=e.createElement("script");i.onload=function(){t.Sentry.init({dsn:"https://6e98a7359b29fa1e566c00f891e415c9@o156739.ingest.sentry.io/4506630567100416",defaultIntegrations:!1}),y(r,o,n,a)},i.src="https://browser.sentry-cdn.com/6.19.7/bundle.min.js",e.body.appendChild(i)}}function k(t,e,r){if(r.debug||"kama.gotrackier.com"==t||"koskii.gotrackier.com"==t){var o=S(r).join("&"),n=O(),a=r&&r.is_camp;fetch("https://logs.cloudstuff.tech/?"+(a?"adid":"av")+"="+e+"&"+o+"&click_id="+n).then((function(t){})).catch((function(o){console.log("[log.ERROR TrackierWebSDK] Additional logging failed"),b(o,t,e,r)}))}}function C(r,o,n){var a=n&&n.is_iframe||n&&n.isIframe?"iframe":"image",i=n&&n.order_date||"";if(!i&&t.Shopify&&t.Shopify.checkout&&(i=t.Shopify.checkout.updated_at||t.Shopify.checkout.created_at),i&&n&&(n.order_date=i,!function(t){try{var e=new Date(t);if(!e.toJSON())return!0;var r=new Date;return v(r)==v(e)&&(r.getTime()-e.getTime())/1e3<86400}catch(t){return!0}}(i)))console.log("[log.INFO TrackierWebSDK] Skip order tracking as it is not of current date");else{var c=S(n).join("&"),u=O(),s="https://"+r+"/pixel?"+(n&&n.is_camp?"adid":"av")+"="+o+"&"+c+"&click_id="+u;if("iframe"==a){var f=e.createElement("iframe");f.setAttribute("src",s),f.style.display="none",e.body.appendChild(f)}else{(new Image).src=s}}}function I(t,e,r){try{C(t,e,r)}catch(o){r&&r.capture_error&&b(o,t,e,r)}}function w(s,f){var m,d,g,h=p("utm_source");if(m=e.referrer,d=p("gclid"),g=p("fbclid"),(/^https:\/\/www\.google\./.test(m)||"https://www.google.com/"==m||"https://www.bing.com/"==m||"https://search.yahoo.com/"==m||"https://in.search.yahoo.com/"==m||/search\.yahoo\.com/.test(m)||"string"==typeof d&&d.length>10||"string"==typeof g&&g.length>10)&&!h)return e.cookie=r+"=;path=/;expires=Thu, 01 Jan 1970 00:00:00 GMT",e.cookie=o+"=;path=/;expires=Thu, 01 Jan 1970 00:00:00 GMT",e.cookie=n+"=;path=/;expires=Thu, 01 Jan 1970 00:00:00 GMT",e.cookie=a+"=;path=/;expires=Thu, 01 Jan 1970 00:00:00 GMT",e.cookie=i+"=;path=/;expires=Thu, 01 Jan 1970 00:00:00 GMT",e.cookie=c+"=;path=/;expires=Thu, 01 Jan 1970 00:00:00 GMT",t.sessionStorage&&(t.sessionStorage.removeItem(r),t.sessionStorage.removeItem(o),t.sessionStorage.removeItem(n),t.sessionStorage.removeItem(a),t.sessionStorage.removeItem(i),t.sessionStorage.removeItem(c)),t.localStorage&&(t.localStorage.removeItem(r),t.localStorage.removeItem(o),t.localStorage.removeItem(n),t.localStorage.removeItem(a),t.localStorage.removeItem(i),t.localStorage.removeItem(c)),void A("organic");t.localStorage&&(s==l?t.localStorage.setItem(u,l):t.localStorage.setItem(u,"ck")),E(p("click_id"),p("utm_campaign"),f)}function x(e){var r=JSON.stringify(e);t.btoa?N(s,t.btoa(r)):N(s,m.encode(r))}function T(e,r){try{var o=function(e){var r;r=t.atob?t.atob(e):m.decode(e);var o=JSON.parse(r);return o||(o=[]),o}(r),n=o[o.length-1];return n.utms!=e.utms||e.utmc&&e.utmc!=n.utmc?(o.length>=5&&o.shift(),o.push(e),x(o),!0):(n.ts=e.ts,n.utmd=e.utmd,n.utmc=e.utmc,o[o.length-1]=n,x(o),!0)}catch(t){b(t)}return!1}function A(t){if(!t)return!1;var e=function(t){var e=new Date,r={utms:d(t||p("utm_source")),ts:e.toJSON()},o=p("utm_campaign");o&&(r.utmc=d(o));var n=p("utm_medium");return n&&(r.utmd=d(n)),r.enc="yes",["utms","utmc","utmd"].forEach((function(t){r[t]&&(r[t]=encodeURIComponent(r[t]))})),r}(t),r=h(s);return r?T(e,r):(x([e]),!0)}function E(t,e,r){var c=p("utm_source"),u=h(a);c&&u!=c&&!e&&(e="__EMPTY__"),A(c)&&r&&r.cf_prb&&function(t){if(t&&t.tdomain){var e=p("click_id")||O(),r="https://"+t.tdomain+"/prbcl?click_id="+e+"&j="+h(s);fetch(r).then((function(t){})).catch((function(t){}))}}(r),N(o,t),N(n,e),N(a,c),N(i,p("utm_medium"))}function N(r,o){g()?t.sessionStorage&&o&&t.sessionStorage.setItem(r,o):(!function(t,r){var o=new Date;o.setTime(o.getTime()+31536e6),r&&(e.cookie=t+"="+r+";path=/;expires="+o.toUTCString())}(r,o),t.localStorage&&o&&t.localStorage.setItem(r,o))}function O(){var t=h(o);return t||(h(r)||"")}var J=function(){function t(){}return t.prototype.init=function(t,e){w(t,e)},t.prototype.clickPixelCb=function(t){E(t.click_id,"trackier_",{})},t.prototype.hasSessionId=function(){var t=O();return t&&"string"==typeof t&&24===t.length},t.prototype.getTrackingToken=function(){return O()||""},t.prototype.getVersion=function(){return f},t.prototype.setIsNewUser=function(t){N(c,!0===t?"true":"false")},t.prototype.isNewUser=function(t){return"true"==h(c)},t.prototype.trackClick=function(t,r){!function(t,r){var o=e.createElement("script"),n=p("campaign_id"),a=p("pub_id"),i=p("fbclid"),c=p("gclid");if(n&&a){var u="https://"+t+"/click_pixel?campaign_id="+n+"&pub_id="+a;i&&(u+="&fbclid="+i),c&&(u+="&gclid="+c),u+="&callback=window.TrackierWebSDK.clickPixelCb",o.setAttribute("src",u),o.setAttribute("type","text/javascript"),o.setAttribute("async",!0),e.body.appendChild(o)}}(t)},t.prototype.trackConv=function(t,e,r){I(t,e,r),k(t,e,r)},t.prototype.trackConvForBrand=function(t,e,r){var o;(o=h(n)||"",/^trackier_/i.test(o))?(I(t,e,r),k(t,e,r)):k(t,e,r)},t}();t.TrackierWebSDK=new J}(window,window.document);